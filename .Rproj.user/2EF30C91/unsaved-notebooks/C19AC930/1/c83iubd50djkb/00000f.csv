"0","# --- Step 1: Load Libraries and Data ---"
"0",""
"0","library(tidyverse)"
"0","library(readxl)"
"0",""
"0","# Provide the FULL path to the XLSX file."
"0","file_path <- ""C:/Users/zach/OneDrive - North Carolina State University/TVLR/Looming_Sounds_Contrast/Zach work/ori_con_full.xlsx"""
"0","ori_con_data <- read_xlsx(file_path, col_names = TRUE)"
"0",""
"0",""
"0","# --- Step 2: Clean Data by Renaming Columns by Position ---"
"0",""
"0","# This is the most robust method for cleaning the column names."
"0","colnames(ori_con_data)[5] <- ""sound"""
"0","colnames(ori_con_data)[8] <- ""location"""
"0","colnames(ori_con_data)[9] <- ""difficulty"""
"0","colnames(ori_con_data)[11] <- ""correct"""
"0","colnames(ori_con_data)[12] <- ""rt"""
"0",""
"0",""
"0","# --- Step 3: Calculate Means for the ""Easy"" Condition with Robust Handling ---"
"0",""
"0","# First, filter for the orientation task and create base factors."
"0","easy_condition_data <- ori_con_data %>%"
"0","  filter(task_type == ""orientation"") %>%"
"0","  mutate("
"0","    correct = as.numeric(correct), "
"0","    rt = as.numeric(rt),"
"0","    sound_condition = factor(sound,"
"0","                             levels = c(32, 1, -1),"
"0","                             labels = c(""Looming"", ""Stationary"", ""No_Sound"")),"
"0","    visual_location = factor(location,"
"0","                             levels = c(0, 1),"
"0","                             labels = c(""Center"", ""Periphery""))"
"0","  )"
"0",""
"0","# Create a complete grid to ensure all 6 conditions are present"
"0","all_conditions <- expand.grid("
"0","  sound_condition = c(""Looming"", ""Stationary"", ""No_Sound""),"
"0","  visual_location = c(""Center"", ""Periphery"")"
"0",")"
"0",""
"0","# Calculate ""Easy"" accuracy means and join to the complete grid"
"0","easy_acc_means <- easy_condition_data %>%"
"0","  group_by(sound_condition, visual_location) %>%"
"0","  dplyr::summarise(mean_acc = mean(correct, na.rm = TRUE), .groups = 'drop') %>%"
"0","  right_join(all_conditions, by = c(""sound_condition"", ""visual_location"")) %>%"
"0","  mutate(mean_acc = ifelse(is.na(mean_acc), mean(mean_acc, na.rm = TRUE), mean_acc)) %>%"
"0","  dplyr::arrange(sound_condition, visual_location)"
"0",""
"0","# Trim RT data to remove outliers before calculating the mean"
"0","easy_rt_means <- easy_condition_data %>%"
"0","  filter(correct == 1) %>%"
"0","  filter(rt >= 250, rt <= 2500) %>%"
"0","  group_by(sound_condition, visual_location) %>%"
"0","  dplyr::summarise(mean_rt = mean(rt, na.rm = TRUE), .groups = 'drop') %>%"
"0","  right_join(all_conditions, by = c(""sound_condition"", ""visual_location"")) %>%"
"0","  mutate(mean_rt = ifelse(is.na(mean_rt), mean(mean_rt, na.rm = TRUE), mean_rt)) %>%"
"0","  dplyr::arrange(sound_condition, visual_location)"
"0",""
"0",""
"0","# --- Step 4: Estimate ""Medium"" & ""Hard"" Conditions with 50% Accuracy Floor ---"
"0",""
"0","# --- FIX: Directly model the accuracy drop-off to a 50% chance level ---"
"0","# 1. Define ""Hard"" condition as 50% (chance)"
"0","hard_acc_means <- rep(0.50, 6)"
"0",""
"0","# 2. Define ""Medium"" as the midpoint between ""Easy"" and ""Hard"""
"0","medium_acc_means <- (easy_acc_means$mean_acc + hard_acc_means) / 2"
"0",""
"0","# 3. Combine into a matrix (rows are sound/location conditions, cols are difficulty)"
"0","acc_matrix <- cbind(easy_acc_means$mean_acc, medium_acc_means, hard_acc_means)"
"0",""
"0","# 4. Apply a slight penalty to ""No Sound"" conditions based on theory"
"0","no_sound_penalty_acc <- 0.02 # Subtract 2% accuracy for No Sound conditions"
"0","acc_matrix[3,] <- acc_matrix[3,] - no_sound_penalty_acc # No Sound, Center"
"0","acc_matrix[6,] <- acc_matrix[6,] - no_sound_penalty_acc # No Sound, Periphery"
"0",""
"0","# 5. Build the final vector"
"0","mu_vector_acc <- as.vector(t(acc_matrix))"
"0",""
"0","# RT estimation remains the same"
"0","rt_matrix <- matrix(c("
"0","   0,  75, 150,  # Looming-Center"
"0","   0,  75, 150,  # Looming-Periphery"
"0","   0,  75, 150,  # Stationary-Center"
"0","   0,  75, 150,  # Stationary-Periphery"
"0","  10, 100, 160,  # NoSound-Center (slightly slower)"
"0","  10, 100, 160   # NoSound-Periphery (slightly slower)"
"0","), nrow = 6, byrow = TRUE)"
"0",""
"0","mu_vector_rt <- as.vector(t(outer(easy_rt_means$mean_rt, c(1,1,1)) + rt_matrix))"
"0",""
"0",""
"0","# --- Step 5: Display the Final Estimated mu_vectors ---"
"0",""
"0","cat(""--- For Accuracy (Estimated Vector with 50% Floor) ---\n"")"
"1","--- For Accuracy (Estimated Vector with 50% Floor) ---
"
"0","dput(mu_vector_acc)"
"1","c(0.666831275720165, 0.583415637860082, 0.5, 0.676049382716049, 
"
"1","0.588024691358025, 0.5, 0.646831275720165, 0.563415637860082, 
"
"1","0.48, 0.671604938271605, 0.585802469135802, 0.5, 0.666831275720165, 
"
"1","0.583415637860082, 0.5, 0.632839506172839, 0.55641975308642, 
"
"1","0.48)
"
"0","cat(""\n--- For Response Time (Estimated Vector from Trimmed Data) ---\n"")"
"1","
--- For Response Time (Estimated Vector from Trimmed Data) ---
"
"0","dput(mu_vector_rt)"
"1","c(495.295772166143, 570.295772166143, 645.295772166143, 486.191433566434, 
"
"1","561.191433566433, 636.191433566433, 495.295772166143, 570.295772166143, 
"
"1","645.295772166143, 487.177330895795, 562.177330895795, 637.177330895795, 
"
"1","505.295772166143, 595.295772166143, 655.295772166143, 522.518552036199, 
"
"1","612.518552036199, 672.518552036199)
"
