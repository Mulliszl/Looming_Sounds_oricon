"0","power_results_acc <- purrr::map_dbl(sample_sizes, ~{"
"0","  significant_results <- 0"
"0","  "
"0","  for (i in 1:nsim) {"
"0","    data_sim <- expand.grid("
"0","      subject = factor(1:.),"
"0","      auditory = factor(auditory_levels),"
"0","      location = factor(location_levels),"
"0","      difficulty = factor(difficulty_levels)"
"0","    )"
"0","    "
"0","    subject_effects <- rnorm(., mean = 0, sd = sd_between_acc)"
"0","    data_sim$y <- mu_vector_acc["
"0","      (as.numeric(data_sim$auditory) - 1) * (n_location * n_difficulty) +"
"0","      (as.numeric(data_sim$location) - 1) * n_difficulty +"
"0","      as.numeric(data_sim$difficulty)"
"0","    ] + subject_effects[data_sim$subject] + rnorm(nrow(data_sim), mean = 0, sd = sd_error_acc)"
"0","    "
"0","    model_anova <- afex::aov_ez("
"0","      id = ""subject"","
"0","      dv = ""y"","
"0","      between = NULL,"
"0","      within = c(""auditory"", ""location"", ""difficulty""),"
"0","      data = data_sim,"
"0","      fun_aggregate = mean"
"0","    )"
"0","    "
"0","    p_value <- anova(model_anova)$`Pr(>F)`[6] # Assuming 6th row is 3-way interaction"
"0","    if (!is.na(p_value) && p_value < alpha) {"
"0","      significant_results <- significant_results + 1"
"0","    }"
"0","  }"
"0","  "
"0","  significant_results / nsim"
"0","})"
"2","Error: object 'sample_sizes' not found
"
